# 判定系統

## 四、判定系統

### 基礎判定

**d20 擲骰 + 調整值 vs DC (難度等級)**

**DC 難度參考:**
- DC 5: 非常簡單
- DC 10: 簡單
- DC 15: 中等
- DC 20: 困難
- DC 25: 非常困難
- DC 30: 幾乎不可能

### 優勢與劣勢

**優勢 (Advantage)**: 擲兩次 d20,取較高值
**劣勢 (Disadvantage)**: 擲兩次 d20,取較低值

### 自動成功/失敗

**攻擊檢定:**
- 擲出自然 20: 重擊(傷害骰加倍)
- 擲出自然 1: 自動失敗

**技能/豁免檢定:**
- 依GM判斷是否啟用自動成功/失敗規則

### 判定結果敘事格式

**GM 在顯示擲骰結果時,只顯示必要資訊並立刻進入敘事:**

**格式範例:**
```
【檢定: 運動】
d20 = 14 + 力量(+3) + 熟練(+2) = 19 vs DC 15
結果: 成功

(立刻進入敘事描述,不顯示系統計算或分析文字)
```

**d20 結果評價(簡短標註):**
- **d20 = 1:** 大失敗
- **d20 = 2-5:** 糟糕
- **d20 = 6-9:** 不佳
- **d20 = 10-14:** 正常
- **d20 = 15-17:** 不錯
- **d20 = 18-19:** 優秀
- **d20 = 20:** 傳奇

**禁止顯示的內容(會破壞沉浸感):**
- ❌ 系統計算說明(「根據訓練總評系統...」)
- ❌ 成功率分析(「假設基礎成功率為40%...」)
- ❌ 對應表格(「d20=6 對應:表現等級...」)
- ❌ 元遊戲解釋(「這符合新手預期...」)

**正確做法:**
擲骰後,用一句話標註結果評價(如「d20 = 6 (不佳)」),然後直接進入敘事描述結果。

### 高成功率自動通過機制

**規則說明:**
當玩家進行檢定時,如果計算出的成功率 ≥ 95%,則自動視為成功,不進行實際擲骰。

**計算方式:**
- 成功率 = (21 - 所需骰值) / 20 × 100%
- 所需骰值 = DC - 總加值
- 當所需骰值 ≤ 2 時,成功率 ≥ 95%

**範例:**
- DC 10 的檢定,角色總加值 +8
- 所需骰值 = 10 - 8 = 2
- 成功率 = (21 - 2) / 20 = 95%
- **自動成功,不中斷劇情擲骰**

**適用情況:**
- 所有技能檢定
- 所有屬性檢定
- 所有豁免檢定
- 不適用於攻擊檢定(攻擊永遠有自然1失敗的可能)

**目的:**
- 保持劇情流暢性
- 避免不必要的停頓
- 專注於有挑戰性的關鍵時刻

### 判定執行方式

**根據場景類型選擇適當的判定方式:**

#### 1. 總評擲骰法 (適用於重複性場景)

**適用場景:**
- 日常訓練(格瑞姆的戰鬥訓練、自主練習)
- 鍛造工作(非關鍵訂單的製作過程)
- 一般商人互動
- 日常生活瑣事
- **大規模戰鬥**(軍隊對峙、5人 vs 60隻史萊姆等)
- **重複性檢定場景**(需要大量擲骰才能完成的活動)

**❌ 不適用場景:**
- 正常規模的戰鬥(1-5個敵人)
- 小隊戰鬥(每個敵人都有戰術意義)
- Boss戰或重要戰鬥
- 關鍵的單次判定

**執行方式 - 總評擲骰法:**

不需要每次動作都擲骰,而是**擲一次 d20 決定整場活動的整體結果**,然後用敘事呈現過程。

**步驟:**

1. **訓練開始時,擲一次 d20 (訓練總評)**
   ```bash
   echo $((RANDOM % 20 + 1))
   ```

2. **根據 d20 結果對應角色的整體表現等級:**

**假設基礎成功率為 60% (10次訓練):**

| d20 結果 | 表現等級 | 成功次數 | 失敗次數 | 描述 |
|---------|---------|---------|---------|------|
| 1-2     | 糟糕    | 2-3次   | 7-8次   | 狀態極差,頻繁失誤 |
| 3-5     | 不佳    | 4-5次   | 5-6次   | 表現低於預期 |
| 6-10    | 正常    | 6次     | 4次     | 符合能力期望值 |
| 11-15   | 良好    | 7次     | 3次     | 表現穩定,進步明顯 |
| 16-18   | 優秀    | 8次     | 2次     | 超出預期的表現 |
| 19-20   | 完美    | 9-10次  | 0-1次   | 幾近完美的發揮 |

**不同基礎成功率的調整:**
- **40% 成功率:** 每級成功次數 -2
- **50% 成功率:** 每級成功次數 -1
- **60% 成功率:** 使用上表
- **70% 成功率:** 每級成功次數 +1
- **80% 成功率:** 每級成功次數 +2

3. **GM 根據結果用敘事方式描述訓練過程**
   - 自然融入成功與失敗的細節
   - 展現角色的掙扎、適應、成長
   - 保持劇情流暢性

4. **應用 Fail Forward (失敗推進) 原則**

   即使表現不佳也推進劇情,給予適當後果:

   - **糟糕 (2-3次成功):** 需額外加練 + 體力大幅消耗 + 教練失望
   - **不佳 (4-5次成功):** 需額外加練 + 體力消耗
   - **正常 (6次成功):** 達標,無額外懲罰
   - **良好 (7次成功):** 教練讚許,獲得額外指導
   - **優秀 (8次成功):** 教練驚訝,關係加深
   - **完美 (9-10次成功):** 教練高度認可,可能提前解鎖新技能

**範例流程 - 日常訓練:**

```
訓練開始 → 擲 d20 = 8
→ 對應「正常」等級 (60%成功率 = 6次成功,4次失敗)
→ GM 敘事10次訓練過程,合理安排4次失敗的細節
→ 結果: 達標,繼續下一項訓練
```

**範例流程 - 大規模戰鬥:**

當發生**5人小隊 vs 60隻史萊姆**或**兩軍對峙**等大規模戰鬥時:

**步驟 1: 評估雙方實力**
- 計算己方總戰力 (等級、裝備、數量、地形優勢等)
- 計算敵方總戰力
- 判斷基礎勝率 (例如: 70%勝率)

**步驟 2: 擲一次 d20 決定戰鬥結果**

**大規模戰鬥結果表 (假設基礎勝率 70%):**

| d20 結果 | 戰鬥結果 | 己方損失 | 敵方狀況 | 後果 |
|---------|---------|---------|---------|------|
| 1       | 慘敗    | 集體重傷/死亡 | 敵方幾乎無損 | 任務失敗,需撤退或被俘 |
| 2-4     | 失敗    | 嚴重損傷 | 敵方輕傷 | 被迫撤退,損失裝備/資源 |
| 5-8     | 勉強撤退 | 中等損傷 | 敵方中等損傷 | 成功撤退,保留主力 |
| 9-12    | 險勝    | 輕傷為主 | 敵方大量傷亡 | 勝利但需休整,消耗資源 |
| 13-17   | 勝利    | 少量輕傷 | 敵方潰散 | 勝利,獲得戰利品 |
| 18-19   | 大勝    | 極少損傷 | 敵方全滅 | 完勝,豐厚戰利品 |
| 20      | 完美勝利 | 無傷 | 敵方全滅 | 壓倒性勝利,額外獎勵 |

**不同勝率的調整:**
- **30% 勝率:** 1-14 = 失敗,15-17 = 險勝,18-19 = 勝利,20 = 大勝
- **50% 勝率:** 1-10 = 失敗,11-15 = 險勝,16-18 = 勝利,19-20 = 大勝
- **70% 勝率:** 使用上表
- **90% 勝率:** 1-2 = 失敗,3-8 = 險勝,9-15 = 勝利,16-19 = 大勝,20 = 完美

**步驟 3: 敘事呈現戰鬥過程**
- 描述關鍵時刻和轉折點
- 刻劃重要角色的表現
- 根據骰子結果合理安排傷亡與戰果

**範例:**
```
5人小隊 vs 60隻史萊姆
評估: 己方等級高,但數量劣勢,判定基礎勝率 70%
擲 d20 = 15
→ 對應「勝利」(少量輕傷,敵方潰散)
→ GM 敘事: 小隊利用地形和戰術優勢,成功擊潰史萊姆群
→ 結果: 3人輕傷,消耗部分資源,獲得史萊姆膠質 x40
```

**優點:**
- 保留隨機性和驚喜感
- 只需擲一次骰,不中斷劇情
- 避免大規模戰鬥的重複擲骰
- 有範圍彈性,不是寫死的結果
- 即使失敗也能推進故事

#### 2. 戰鬥與重要判定 (真實擲骰)

**適用場景:**
- ⚔️ 正常規模的戰鬥檢定 (1-5個敵人的攻擊、防禦、傷害、豁免)
- 🎯 重要劇情判定 (關鍵選擇、危險行動)
- 🔍 探索危險區域 (陷阱、追逐、潛行)
- 💀 生死攸關的豁免檢定
- 🏆 重要任務的關鍵檢定
- 👑 Boss戰或重要戰鬥 (每個回合都需詳細擲骰)

**❌ 不適用場景:**
- 大規模戰鬥 (使用總評擲骰法)
- 雜兵清場 (20隻以上的低階敵人,使用總評擲骰法)

**執行方式:**
使用 Bash 指令 `echo $((RANDOM % 20 + 1))` 產生真實隨機結果

**常用骰子指令:**
- d20: `echo $((RANDOM % 20 + 1))`
- d12: `echo $((RANDOM % 12 + 1))`
- d10: `echo $((RANDOM % 10 + 1))`
- d8: `echo $((RANDOM % 8 + 1))`
- d6: `echo $((RANDOM % 6 + 1))`
- d4: `echo $((RANDOM % 4 + 1))`
- d100: `echo $((RANDOM % 100 + 1))`

**流程:**
1. GM 說明檢定類型、DC、加值
2. 使用 Bash 執行擲骰指令
3. GM 將結果+加值,判定成敗
4. 敘事呈現結果

#### 3. 社交互動 (依重要性決定)

**需要真實擲骰的情況:**
- 💬 重要NPC對話(影響劇情走向)
- ❤️ 與潛在伴侶的關鍵互動(影響好感度)
- 🤝 重要談判或議價(大額交易、任務報酬)
- 🎭 說服守衛、欺瞞敵人等有風險的社交行動
- 🔍 洞察NPC真實意圖(關鍵時刻)

**可以敘事處理的情況:**
- 一般商人購物
- 日常閒聊
- 熟識NPC的普通對話
- 低風險的社交場合

**檢定類型:**
- 說服 (Persuasion): 魅力檢定
- 欺瞞 (Deception): 魅力檢定
- 威嚇 (Intimidation): 魅力檢定
- 洞察 (Insight): 感知檢定
- 表演 (Performance): 魅力檢定

#### 4. 判定優先級總結

**必定真實擲骰:**
1. 正常規模戰鬥的所有檢定 (1-5個敵人)
2. Boss戰或重要戰鬥
3. 生死攸關的豁免
4. 重要劇情的關鍵判定

**使用總評擲骰法:**
1. 日常訓練 (單次 d20 決定整體表現,成功率 < 80%)
2. 大規模戰鬥 (軍隊對峙、20隻以上雜兵)
3. 重複性檢定場景 (需擲骰 10 次以上才能完成)
4. 中等難度的工作與製作 (成功率 40-80%)

**依情況決定:**
1. 社交互動 (重要時真實擲骰)
2. 探索與調查 (危險時真實擲骰)
3. 工藝製作 (關鍵作品真實擲骰)

**自動成功 (直接敘事,不擲骰):**

**適用條件:**
- 成功率 ≥ 95% 的檢定 (所需骰值 ≤ 2)
- 角色能力遠超任務難度
- 重複性高成功率工作 (成功率 ≥ 80%)

**常見場景:**
1. **專業工作:** 鐵匠大師打造普通鐵板、鐵釘等基礎物品
2. **日常技能:** 熟練騎手騎乘溫馴的馬、游泳健將渡河
3. **低難度檢定:** 爬上有把手的梯子、推開普通的門
4. **大量製作:** 廚師準備50人份餐點、工匠製作100支箭矢

**處理方式:**
- 直接用敘事描述成功過程
- 可加入少量隨機性 (如「效率特別高」或「稍微累了」)
- 節省時間,保持劇情流暢

**範例:**

```
場景: 鐵匠大師(熟練+6, 力量+4) 打造10片鐵板 (DC 10)
計算: d20+10 vs DC 10 → 成功率 100% (只有大失敗才會失敗)
處理: 直接敘事

GM 敘述:
「憑藉多年的經驗,你熟練地將鐵錠加熱至通紅,
鐵錘在你手中如同延伸的肢體,每一次敲擊都精準有力。
不到兩個小時,10片平整的鐵板整齊地堆疊在工作檯上。」

結果: 自動成功,獲得 鐵板 x10
```

```
場景: 新手鐵匠學徒(熟練+2, 力量+1) 打造10片鐵板 (DC 10)
計算: d20+3 vs DC 10 → 成功率 65% (需骰 7 以上)
處理: 使用總評擲骰法,擲一次 d20 決定整體表現
```

**判斷流程:**
1. 計算成功率 = (21 - 所需骰值) × 5%
2. 成功率 ≥ 95% → 自動成功,直接敘事
3. 成功率 80-94% → 視情況決定 (可自動成功或總評擲骰)
4. 成功率 < 80% → 使用總評擲骰法或真實擲骰

### 戰鬥判定

**先攻 (Initiative)**: d20 + 敏捷調整值

**攻擊檢定**: d20 + 屬性調整值 + 熟練加值 vs AC

**傷害**: 武器骰 + 屬性調整值

**豁免檢定**: d20 + 屬性調整值 + (熟練加值) vs DC

---
