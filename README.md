# DND 單人冒險系統 🎲

基於 **D&D 5E** 規則的單人 TRPG (桌上角色扮演遊戲) 專案,由 Claude Code 擔任 GM (Game Master),透過細膩的敘事、真實的擲骰判定,與玩家共同創造黑暗奇幻冒險故事。

---

## ✨ 核心特色

- 🎯 **完整 D&D 5E 系統** - 種族、職業、技能、法術、戰鬥、升級
- 🎲 **真實隨機擲骰** - 允許失敗,不保證好結局,真實冒險體驗
- 📖 **細膩敘事優先** - 詳細場景描寫,角色內心刻劃
- 🤝 **深度 NPC 系統** - 所有有名有姓的角色都有完整背景與發展
- 🆓 **自由行動** - 不主動提供選項清單,玩家自由發揮
- 🌑 **黑暗奇幻世界觀** - 艾爾登法環風格,危險與美麗並存
- 💾 **完善存檔系統** - 主存檔、分支存檔、自動存檔
- 👥 **多角色支援** - Git 分支管理不同角色的冒險旅程

---

## 🚀 快速開始

### 1. Clone 專案

```bash
git clone https://github.com/goodday2871/DND.git
cd DND
```

### 2. 在 Claude Code 中開啟專案

```bash
cd /path/to/DND
# 使用 Claude Code 開啟
```

### 3. 開始冒險

在對話中輸入:
```
開啟選單
```

系統會自動顯示互動式選單,引導您:
- 創建新角色
- 讀取現有存檔
- 切換不同角色
- 離開遊戲模式

---

## 📂 專案結構

```
DND/
├── README.md           # 專案說明 (本檔案)
├── CLAUDE.md           # Claude Code 專案指令與規則
├── dnd.md              # 完整的 D&D 5E 規則系統
├── save.md             # 當前角色的主存檔
├── save-01.md          # 手動建立的分支存檔點
├── save-auto.md        # 系統自動建立的存檔點
└── [角色分支]          # 不同角色的 Git 分支
```

---

## 🎮 遊戲操作指令

### 基礎指令

| 指令 | 使用時機 | 功能 |
|------|---------|------|
| `開啟選單` | 遊戲開始時 | 顯示互動式主選單 (創建/讀取/切換角色) |
| `系統選單` 或 `系統` | 冒險進行中 | 顯示系統功能選單 (人物/裝備/存檔/讀檔/離開) |
| `存檔` | 任何時候 | 更新當前主存檔 (save.md) |
| `另存新檔` | 任何時候 | 創建新的分支存檔 (save-01.md, save-02.md...) |
| `讀檔` | 任何時候 | 從主存檔繼續冒險 |
| `讀檔 01` | 任何時候 | 從指定編號的存檔點繼續 |
| `讀檔 auto` | 任何時候 | 從最新自動存檔點繼續 |
| `上傳` | 任何時候 | 將存檔推送到 GitHub (git add + commit + push) |
| `下載` | 任何時候 | 從 GitHub 同步最新資料 (git pull) |

### 主選單 (開啟選單)

使用時機: **遊戲開始時**

系統使用 `AskUserQuestion` 提供可點擊的選項:
- **開始新的冒險** - 創建新角色並開始旅程
- **讀取記錄繼續冒險** - 從現有存檔繼續
- **切換角色** - 在不同角色的冒險分支之間切換
- **離開** - 回到正常 Claude 對話模式

### 系統選單 (系統選單)

使用時機: **冒險進行中**

在冒險過程中說出「系統選單」,會顯示以下選項:

#### 1. 人物
顯示角色的完整狀態資訊:
- 基本資料 (名稱、種族、職業、等級、經驗值)
- 當前狀態 (HP、MP/法術位、AC、先攻值)
- 屬性值 (六大屬性及調整值)
- 裝備概覽
- 特殊能力列表

#### 2. 裝備
進入裝備管理介面:
- **對話式互動:** 直接說明要做什麼 (如「裝備盾牌」、「查看長劍屬性」)
- **選單式互動:** 若裝備較多,提供分類選單 (武器/護甲/飾品/消耗品)
- **支援操作:** 裝備/卸下、查看詳細資訊、使用/消耗、丟棄
- **鑒定術整合:** 若角色擁有鑒定術,可對未鑒定裝備使用

#### 3. 存檔
執行快速存檔:
- 整理當前劇情進度
- 更新 save.md
- 顯示確認訊息
- 自動回到冒險

#### 4. 讀檔
讀取其他存檔點:
- 列出所有可用存檔
- 警告會放棄當前未存檔進度
- 需要確認才執行
- 讀取後從該存檔點繼續

#### 5. 離開
中斷當前冒險:
- 警告不會保存當前進度
- 提供三個選項:
  - 確認離開 (不存檔)
  - 存檔後離開
  - 取消
- 離開後回到正常 Claude 模式

---

## 👤 多角色管理系統

### Git 分支管理

每個角色都有獨立的 Git 分支,分支命名格式:
```
姓名-職業-日期
```

範例:
- `丹-戰士-2026-02-11`
- `帕拉梅拉-勇者-2026-02-11`

### 切換角色與系統更新

切換角色時會自動執行以下流程:

1. **檢查當前狀態**
   - 若有未提交變更,會提示先存檔
   - 自動暫存未提交的變更

2. **系統更新檢查** ⭐ 重要
   - 自動切換到 main 分支
   - 從 GitHub 拉取最新系統更新
   - 確保使用最新的規則與功能

3. **選擇角色**
   - 顯示所有可用角色: `姓名 (職業)` 格式
   - 選擇要切換的角色

4. **切換並同步**
   - 切換到目標角色分支
   - 自動合併 main 的系統更新到該分支
   - 確保角色分支使用最新規則

5. **開始冒險**
   - 讀取該角色的 save.md
   - 顯示角色基本資訊
   - 繼續冒險

**系統同步規則:**
- ✅ CLAUDE.md (規則) - 與 main 同步
- ✅ dnd.md (規則) - 與 main 同步
- ✅ README.md (說明) - 與 main 同步
- ❌ save.md (存檔) - 保持角色分支獨立

---

## 📖 核心系統說明

### 擲骰與判定系統

- **真實擲骰**: 使用 Bash 的 `$RANDOM` 進行真正隨機擲骰
- **自動通過機制**: 成功率 ≥ 95% 時自動成功,保持敘事流暢
- **訓練總評擲骰法**: 日常訓練場景使用單次擲骰決定整體表現
- **Fail Forward 原則**: 即使失敗也推進劇情,給予適當後果

### 存檔系統

#### 主存檔 (save.md)
- 當前冒險的主要記錄
- 使用「存檔」指令更新

#### 分支存檔 (save-01.md, save-02.md...)
- 玩家手動創建的存檔點
- 用於保存重要劇情節點
- 使用「另存新檔」指令創建

#### 自動存檔 (save-auto.md)
- GM 在重要章節自動創建
- 每次自動存檔會覆寫此檔案
- 觸發時機:
  - 完成重要任務
  - 進入新章節
  - 角色升級
  - 重大劇情轉折

### NPC 系統

- 所有有名有姓的 NPC 都有完整背景
- 記錄於 save.md 的 NPC 記錄區
- 包含:外貌、性格、背景、目標、秘密、與 PC 的關係
- NPC 會隨劇情成長、改變、甚至死亡

### 好感度系統

- 範圍: 0-100
- 階段:
  - 陌生 (0-20)
  - 認識 (21-40)
  - 友好 (41-60)
  - 親密 (61-80)
  - 戀人 (81-100)
- 好感度 60+ 才會觸發特殊劇情

---

## 🌍 世界觀

**艾爾登法環風格的黑暗奇幻世界**

- 古老的神祇與禁忌的力量
- 衰敗的王國與破碎的秩序
- 深邃的地下城與失落的文明
- 扭曲的魔法與異形的怪物
- 灰色的道德與艱難的選擇

---

## 🛠️ 技術架構

### 使用工具

- **Claude Code** - AI GM,負責敘事與規則執行
- **Git** - 版本控制與多角色管理
- **Bash** - 真實隨機擲骰
- **Markdown** - 存檔格式

### 檔案說明

#### CLAUDE.md
- Claude Code 的專案指令檔
- 定義 GM 的行為規則
- 包含完整的操作流程
- 自動被 Claude Code 讀取

#### dnd.md
- 完整的 D&D 5E 規則系統
- 包含:
  - GM 操作指令
  - 角色創建系統
  - 判定系統
  - 戰鬥系統
  - 法術系統
  - 經驗與升級
  - 敘事原則
  - 存檔檔案結構範本

#### save.md
- 角色卡 (屬性、技能、裝備、HP、AC)
- NPC 關係記錄
- 冒險日誌 (詳細的每日記錄)
- 訓練進度、工作成就、財務記錄
- 待辦事項、未解之謎
- GM 備註

---

## 📋 範例角色

### 帕拉梅拉 (勇者)
- **種族:** 轉生者
- **職業:** 勇者 (敏捷型光屬性近戰)
- **特殊能力:** 鑒定術 (可鑒定物品與生物資訊)
- **分支:** `帕拉梅拉-勇者-2026-02-11`

### 丹 (戰士)
- **種族:** 人類
- **職業:** 戰士 (鐵匠學徒)
- **特殊能力:** 鍛造技能
- **分支:** `丹-戰士-2026-02-11`

---

## 🤝 貢獻指南

### 如何貢獻

1. Fork 本專案
2. 創建新的功能分支: `git checkout -b feature/新功能`
3. 提交變更: `git commit -m '[feat]新增功能'`
4. 推送到分支: `git push origin feature/新功能`
5. 提交 Pull Request

### Commit Message 規範

**存檔類:**
```
記錄存檔 - [日期] - [簡短摘要]
```

**系統更新類:**
```
[feat]更新系統
新增XXX功能
修復XXX問題
```

---

## 📝 開發計畫

### 已完成 ✅
- 完整的 D&D 5E 規則系統
- 多角色 Git 分支管理
- 互動式選單系統
- 存檔/讀檔/上傳/下載系統
- 真實隨機擲骰機制
- NPC 深度記錄系統

### 規劃中 🚧
- 戰鬥可視化介面
- 更多預設種族與職業
- 世界地圖系統
- 任務追蹤面板
- 戰役模板系統

---

## ⚠️ 注意事項

1. **備份重要存檔** - 定期使用「上傳」指令推送到 GitHub
2. **切換角色前存檔** - 避免遺失未提交的變更
3. **允許失敗** - 這是設計理念,失敗是故事的一部分
4. **真實擲骰** - 系統不會作弊,骰運是冒險的一部分
5. **細膩敘事** - GM 會詳細描述場景,請耐心體驗

---

## 📜 授權

本專案採用 MIT License。

---

## 🎲 開始您的冒險

準備好了嗎?在 Claude Code 中輸入:

```
開啟選單
```

讓我們一起創造屬於您的傳奇故事!

**願骰運與你同在!** 🎲✨

---

## 📞 聯絡方式

- **GitHub Repository:** [https://github.com/goodday2871/DND](https://github.com/goodday2871/DND)
- **Issues:** 如有問題或建議,請在 GitHub Issues 中回報

---

*由 Claude Code 驅動的 AI Game Master 系統*
